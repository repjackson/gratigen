template(name='role_item')
    .ui.fluid.segment.view_role.pointer
        a.ui.header(href="/role/#{_id}") #{title}
        div
        .ui.small.grey.inline.header #{when}
        | #{content}
        each tags 
            .ui.basic.small.label #{this}
        

template(name='role_view')
    with current_doc
        .ui.stackable.padded.grid
            .three.column.row 
                .column
                    .ui.massive.header #{title}
                    // div
                    // .ui.inline.grey.header {{from_now start_datetime}}
                    
                    if can_edit
                        a.ui.circular.fluid.large.button.edit_role(href="/role/#{_id}/edit" title='edit')
                            i.link.pencil.icon
                            |edit
                        +print_this
                    .ui.segment
                        .ui.header 
                            small author
                        a.ui.header(href="/user/#{_author.username}") 
                            img.ui.avatar.image(src="{{c.url _author.image_id height=200 width=200 gravity='face' crop='fill'}}" class=currentUser.invert_class)
                            |#{_author.username}
                .column
                    .ui.header 
                        |assigned to 
                    each assigned_users
                        +user_pill
                        // .ui.header #{name}
                    .ui.small.grey.header 
                        i.line.chart.icon
                        |stats
                    .ui.list
                        .item #{views} views
                    each viewers
                        .ui.label #{username}
                    +array_view key='tags' label='tags' direct=true
                    +array_view key='badge_titles' label='badges' direct=true
                    +voting_full
                    .ui.header #{when}
                    +eft_viewer
                    //- +array_view key='location_tags' label='location_tags' direct=true
                    +comments
    
                .column
                    img.ui.image(src="{{c.url image_id }}" class=currentUser.invert_class)
                    // a.ui.header(href="/user/#{target.username}")
                    //     |#{target.username}
                    if youtube_id 
                        +youtube_view key='youtube_id' direct=true
                    |!{content}
                    div 
                    .spacer
                    .spacer
                    if watson 
                        +watson_view
                // .four.wide.column
                    //- .ui.fluid.green.button.submit
                    //-     i.checkmark.icon
                    //-     |submit
                        
                        
                    
template(name='role_edit')
    with current_doc
        .ui.stackable.padded.grid
            .three.column.row 
                .column
                    .ui.inline.header 
                        +icolor name='news' cl='ui image inline pointer'
                        |edit role
                    a.ui.icon.green.big.fluid.button.invert(href="/role/#{_id}" title='save')
                        i.checkmark.big.icon
                    +text_edit key='title' label='title' direct=true
                    +title_link_buttons
                .column
                    +html_edit key='content' label='content' direct=true
                    +youtube_edit key='youtube_id' label='youtube id' direct=true
                .column
                    .ui.header required badges
                    +badge_picker
                    +task_picker
                .column
                    +model_picker model='event' icon='calendar'
                    +multi_user_edit key='permissioned_user_ids' label='permissioned users'
                    i.large.link.red.remove.icon.delete_role
                .column
                    .ui.header 
                        small owner - each id should be stored in user account or as nft in crypto wallet.
                        
                    .ui.header 
                        small author
                        |#{_author.username}
                    .ui.basic.center.aligned.segment
                        +eft_picker color="FF73EA" icon='food' label='food'
                        +eft_picker color="B785E1" icon='home' label='housing'
                        +eft_picker color="7229AF" icon='tshirt' label='clothing'
                        +eft_picker color="1255B8" icon='car' label='transportation'
                        +eft_picker color="83DFF4" icon='lightning' label='energy'
                        +eft_picker color="42E8C4" icon='leaf' label='zero waste'
                        +eft_picker color="40C057" icon='smile' label='wellness'
                        +eft_picker color="FAB005" icon='university' label='education'
                        +eft_picker color="FD7E14" icon='paint brush' label='art'
                        +eft_picker color="FF0000" icon='users' label="community core"
                        
                .column
                    if is_dev
                        +single_user_edit key='_author_id' label='author' direct=true
                    +image_edit key='image_id' label='image' direct=true
                    div 
                    +array_edit key='tags' label='tags' direct=true icon='tags'
                    +boolean_edit key='published' icon='visible' direct=true
                    if is_dev 
                        +text_edit key='model' label='model' direct=true
                .column
                    div
                    +html_edit key='responsibilities' label='responsibilities'
                    div
                    +array_edit key='location_tags' label='location_tags' direct=true
                    // unless published
                    //     a.ui.fluid.green.button.submit(href="/save")
                    //         i.checkmark.icon
                    //         |publish
                    // else
                    //     .ui.basic.button.unpublish 
                    //         |unpublish
                .column
                    .ui.header
                        |audience
                    +boolean_edit key='private' label='private' 
                    if private 
                        +multi_user_edit key='access_user_ids' label='user picker' direct=true
                .column
                    +group_picker
                    +array_edit key='skills' label='skills' icon='wrench' direct=true
                .column
                    +model_picker model='skill' icon='wrench'
