//multi-stakeholder cooperatives, 
    stakeholder categories, percentage sliders
//businesses w/departments, 
    Governance
    Strategy
    Finance
    Marketing
    Research and Development (visioning and design)
    Information Technology
    Customer Service
    Human Resources
    Production
    Quality Control
    Distribution
    Sourcing
    Operations
    Design
//incident ics teams, ecs roles
    Ops, fin, adm, log, com, pln
        lead support safety 
        safety officer, public info officer, liason officer, incident commander
        

template(name='org_card')
    .ui.card.zoomer
        if image_id
            a.fly_right(href="/d/org/#{_id}")
                img.ui.image(src="{{c.url image_id width=400 height=400}}")
        .content
            a.ui.header.fly_right(href="/d/org/#{_id}")
                |#{title}
            |#{member_ids.length} members
            .smallscroll
                |!{body}
            //+ismall name='tags' cl='ui inline image'
            each ten_tags
                .ui.basic.label #{this}
            a.zoomer(href="/d/org/#{_id}")
                i.chevron.right.large.circular.icon
            // if is_admin
            //     .ui.small.header slug: #{slug}
            if can_edit
                a.ui.circular.basic.icon.button(href="/d/org/#{_id}/edit")
                    i.pencil.blue.icon
            +print_this
                    


                
template(name='org_history')
    +ismall name='rss'
    .ui.inline.header
        |activity
    .ui.list
        each org_events
            .item #{text} #{when}
            
template(name='org_subscription')
    //- +ismall name='renew-subscription'
    //- .ui.inline.header
    //-     |subscription settings
    .ui.basic.button.subscribe subscribe to updates
    .ui.list
        each subscribers
            .item #{text} #{when}
            
template(name='org_reservations')
    .ui.header
        +ismall name='invoice'
        |org reservations
    .ui.button.new_reservation
        |new reservation
    each reservations
        .ui.segment
            .ui.header #{when}
            .ui.header by #{_author_username}
            +view_button
            +edit_button


// template(name='org_edit')
//     with current_doc
//         .ui.stackable.padded.grid
//             .row
//                 .ui.stackable.padded.grid
//                     .two.column.row 
//                         .column
//                             .ui.header editing #{title} org
//                             .ui.inline.header 
//                                 +icolor name='group' cl='ui image inline pointer'
//                             +title_link_buttons
//                             a.ui.icon.green.big.button(href="/d/org/#{_id}" title='save')
//                                 i.checkmark.big.icon
//                             +text_edit key='title' label='title'
                            
//                             +html_edit key='body' label='body'
//                             +youtube_edit key='youtube_id' label='youtube id'
//                         .column
//                             .ui.header required badges
//                             +badge_picker
//                             +role_crud
//                             +task_picker
                            
//                         .column
//                             +model_picker model='event' icon='calendar'
                            
//                             i.large.link.red.remove.icon.delete_role
//                         .column
//                             .ui.header 
//                                 small owner - each id should be stored in user account or as nft in crypto wallet.
                                
//                             .ui.header 
//                                 small author
//                                 |#{_author.username}
//                             .ui.basic.center.aligned.segment
//                                 +eft_picker color="FF73EA" icon='food' label='food'
//                                 +eft_picker color="B785E1" icon='home' label='housing'
//                                 +eft_picker color="7229AF" icon='tshirt' label='clothing'
//                                 +eft_picker color="1255B8" icon='car' label='transportation'
//                                 +eft_picker color="83DFF4" icon='lightning' label='energy'
//                                 +eft_picker color="42E8C4" icon='leaf' label='zero waste'
//                                 +eft_picker color="40C057" icon='smile' label='wellness'
//                                 +eft_picker color="FAB005" icon='university' label='education'
//                                 +eft_picker color="FD7E14" icon='paint brush' label='art'
//                                 +eft_picker color="FF0000" icon='users' label="community core"
                                
//                         .column
//                             if is_dev
//                                 +single_user_edit key='_author_id' label='author'
//                             +image_edit key='image_id' label='image'
//                             div 
//                              +boolean_edit key='published' icon='visible'
//                             if is_dev 
//                                 +text_edit key='model' label='model'
//                         .column
//                             div
//                             +html_edit key='responsibilities' label='responsibilities'
//                             div
//                             +array_edit key='location_tags' label='location_tags'
//                             // unless published
//                             //     a.ui.fluid.green.button.submit(href="/save")
//                             //         i.checkmark.icon
//                             //         |publish
//                             // else
//                             //     .ui.basic.button.unpublish 
//                             //         |unpublish
//                         .column
//                             .ui.header
//                                 |audience
//                             +boolean_edit key='private' label='private' 
//                             if private 
//                                 +multi_user_edit key='access_user_ids' label='user picker'
//                         .column
//                             +group_crud
//                             +array_edit key='skills' label='skills' icon='wrench'
//                         .column
//                             +model_picker model='skill' icon='wrench'


template(name='title_link_buttons')
    a.zoomer(href="https://www.google.com/search?q=#{title}" target='_window' title="google #{title}")
        i.search.circular.link.icon.zoomer
    a.zoomer(href="https://www.google.com/search?tbm=isch&q=#{title}" target='_window' title="image search #{title}")
        i.image.circular.link.icon.zoomer
    a.zoomer(href="https://www.amazon.com/s?k=#{title}&ref=nb_sb_noss_2" target='_window' title="amazon search #{title}")
        i.amazon.circular.link.icon.zoomer



template(name='org_view')
    // if currentUser.admin_mode 
    //     +org_edit
    .ui.stackable.padded.grid.scrolling
        // .middle.aligned.row
        //     img.ui.fluid.image.bg_overlay(src="{{c.url image_id crop='fit'}}")
        //     .three.wide.column
        //         .left_floated
        //             a.ui.circular.tertiary.large.button.zoomer.fly_left(href="/")
        //                 i.left.chevron.icon
        //                 +ismall name='groups' color='83DFF4' 
        //                 |orgs
        //     .nine.wide.center.aligned.column
        //         .ui.centered.inline.huge.center.aligned.header
        //             |#{title}
        //     .four.wide.right.aligned.column
        //         +subscribe_button
        //         +bookmark_button
        //         // .floated
        //         if can_edit
        //             +edit_button
        //         if currentUser.edit_mode 
        //             +remove_button
        .row
            .five.wide.column
                +image_edit key='image_id' icon='image' label='image'
                if currentUser.edit_mode 
                    +array_edit key='tags' icon='tags'
                else    
                    +array_view key='tags' icon='tags'
                
                +title_link_buttons
                .spacer
                if link
                    a.ui.basic.circular.button(href=link target='_window')
                        i.external.icon
                        |view site
                    .spacer
                div
                .spacer
                if address
                    a.ui.compact.basic.circular.button(href=address_link target='_window')
                        i.marker.icon
                        |#{address}
                +textarea_edit key='purpose' tagline="what is the basic purpose of your organization? what principals does it serve?"
                +textarea_edit key='vision' label='vision' tagline="how will your organization impact society? how will it look for people?"
                +textarea_edit key='mission' tagline='your business goals and the values you will embrace to achieve them'
                +textarea_edit key='bylaws' tagline='bylaws of your organization. Articles of incorporation are the primary law of an association used to establish the general organization and governing of the association to achieve corporate existence. Bylaws are the secondary law of an association best used to detail how the society is formed and run.'
                +textarea_edit key='signature' tagline='creators signature'
                +viewing
                if in_dev 
                    +print_this
                // +multi_user_view key='member_ids' label='members' 
                +org_history
                +org_subscription

            .six.wide.column
                .centered.row
                    +eft_viewer
                .ui.header leaders
                    .ui.four.column.centered.grid
                        .column 
                            .ui.centered.small.header lead
                            +single_user_edit key='lead' label='lead' icon='king'
                        .column 
                            .ui.centered.small.header support
                            +single_user_edit key='support' label='support' icon='users'
                        .column 
                            .ui.centered.small.header safety
                            +single_user_edit key='safety' label='safety'
                        .column 
                            .ui.centered.small.header creator
                            +single_user_edit key='creator' label='creator' icon='edit'
                +textarea_edit key='brief' tagline='breif description or your organization'
                +textarea_edit key='description' tagline='complete description of your organization'
                +textarea_edit key='body' tagline='body'
                
                // |!{body}
                +role_crud
                +project_crud
                +event_crud
                +task_crud


                // a.item(href="/d/org/#{_id}/#{username}")
                //     img.ui.mini.image(src="{{c.url image_id width=200 height=200}}")
                //     .content
                //         .header
                //             |#{username}
            .five.wide.column
                if is_member
                    .ui.big.button.leave(title='click to leave')
                        i.checkmark.icon
                        |member
                else 
                    .ui.big.button.join(title='click to join')
                        i.user.plus.icon
                        |join 
                div
                .ui.inline.header members
                each member_ids
                    +user_pill
                if currentUser.edit_mode 
                    +multi_user_edit key='member_ids' label='members'
                
                if currentUser.edit_mode
                    .ui.basic.center.aligned.segment
                        +eft_picker color="FF73EA" icon='food' label='food'
                        +eft_picker color="B785E1" icon='home' label='housing'
                        +eft_picker color="7229AF" icon='tshirt' label='clothing'
                        +eft_picker color="1255B8" icon='car' label='transportation'
                        +eft_picker color="83DFF4" icon='lightning' label='energy'
                        +eft_picker color="42E8C4" icon='leaf' label='zero waste'
                        +eft_picker color="40C057" icon='smile' label='wellness'
                        +eft_picker color="FAB005" icon='university' label='education'
                        +eft_picker color="FD7E14" icon='paint brush' label='art'
                        +eft_picker color="FF0000" icon='users' label="community core"
                // +doc_array_togggle key='member_ids' value=currentUser._id add_label='join' remove_label='joined'
                +checklist
                .ui.header 
                    +i name='rss'
                    |activity
                +group_crud
                +product_crud
                +service_crud
                +badge_crud
                +resource_crud
                +keyresult_crud
                +objective_crud
                +shift_crud
                each log_items
                    +log_item
                .ui.header.refresh_org_stats
                    +i name='line-chart'
                    |stats
                i.refresh.link.icon.refresh_org_stats
                .ui.large.list
                    .item #{total_credit_exchanged} credits exchanged
                    .item 
            .eight.wide.column
                +related_docs 
            .eight.wide.column
                +comments

    
    
template(name='related_docs')
    details.ui.styled.fluid.accordion
        summary.title.zoomer
            .ui.inline.header
                | related

        .content
            .ui.items
                each related_doc_results 
                    a.link.item(href="/d/#{model}/#{_id}")
                        img.ui.small.image(src="{{c.url image_id width=200 height=200}}")
                        .content
                            .header #{title}
                            .meta
                                each five_tags 
                                    .ui.basic.label #{this}
                                +author_info
                                +creation_info

    
template(name='org_section')
    .ui.segment
        .ui.header #{title}
        |#{tagline}
        if currentUser.edit_mode 
            |editing #{key}
            +textarea_edit key=key
        else         
            +textarea_view key=key
    
template(name='edit_button')
    if currentUser.edit_mode
        .ui.basic.big.green.circular.icon.button.edit_mode.invert.zoomer(title="save #{title}")
            i.setting.big.blue.zoomer.loading.icon(title="edit #{title}")
            i.checkmark.big.icon.zoomer
            // |save
    else
        i.setting.big.link.zoomer.icon.edit_mode(title="edit #{title}")
    // a.ui.circular.tertiary.icon.button.zoomer.floated.right.fly_down(href="/d/org/#{_id}/edit" title="edit #{title}")
    // a.ui.circular.tertiary.icon.button.zoomer.edit_mode(title="edit #{title}")

    
    
    
    
template(name='user_orgs')
    .smallscroll
        .ui.inline.header #{user_authored_orgs.count} authored orgs
        if is_current_user
            .ui.circular.tertiary.basic.icon.button.add_org
                i.plus.icon
        .ui.selection.divided.list 
            each user_authored_orgs
                +profile_org_item

template(name='profile_org_item')
    a.ui.item(href="/d/org/#{_id}")
        +image_view key='image_id'  cl='zoom ui tiny image'
        .content
            .ui.header #{title}
            // a.ui.small.header.inline.lowercase(href="/d/org/#{_id}/")
            //     |#{price_per_serving}c / #{serving_unit}
            // .ui.small.inline.header #{when}
            +creation_info
    
    
    
template(name='orgs_small')
    a.ui.header.zoomer(href="/orgs")
        +i name='orgs'
        |orgs
    .ui.selection.animated.list.smallscroll
        each org_docs
            a.item(href="/d/org/#{_id}")
                img.ui.avatar.image(src="{{c.url image_id width=200 height=200}}")
                |#{title}